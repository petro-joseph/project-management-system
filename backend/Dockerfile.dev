FROM node:18-alpine

WORKDIR /usr/src/app

COPY package*.json ./
RUN npm install && npm install ts-node typescript nodemon

COPY . .

EXPOSE 3001

CMD ["sh", "-c", "echo 'Starting backend...' && npx ts-node src/server.ts || echo 'Error: Backend failed to start'"]